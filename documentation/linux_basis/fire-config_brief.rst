.. vim: syntax=rst

fire-config工具简介
-------------------

fire-config是野火IMX-6ULL开发板自带的一个系统配置工具，
通过串口终端可以方便地使用它来进行系统功能的使能或禁止。


使用方法
~~~~~~~~~~~~~~~~~~~~~

在登录系统以后，如果要使用fire-config工具，只需要运行以下命令

.. code-block:: sh
   :emphasize-lines: 2
   :linenos:

   sudo fire-config

   注意:由于该工具会改变一系列不属于当前用户的文件，sudo是必须要加的。

执行指令后，将会在串口终端看到如下输出:

.. image:: media/fire-config.png
   :align: center
   :alt: fire-config工具


菜单选择和移动
~~~~~~~~~~~~~~~~~~~~~

在该菜单中，使用up和down箭头键可以在不同的选项中切换，被选中的一项将会高亮显示，
使用right箭头键将跳出"选项"，并跳转到<Select>和<Finish>按钮。按下left将使您返回选项。
<Select>按钮表示该项被选中，<Finish>按钮表示已完成全部配置项。


fire-config机制
~~~~~~~~~~~~~~~~~~~~~
一般而言，fire-config旨在提供一些常见的系统功能配置服务，在进行配置过程中，
这可能会导致/boot/uEnv.txt或者是其他各种标准的linux配置文件被自动更改了，
某些选项需要重启才能生效，如果您修改了其中一个，fire-config 会在<Finish>
按钮被选择时，询问您是否要立即重启，如果您希望配置马上生效，确定重启系统即可。

Device Tree Overlays
~~~~~~~~~~~~~~~~~~~~~

fire-config工具通过使用Device Tree Overlays用来管理一些硬件资源的分配和模块的加载，
从而缓解多个驱动程序争用系统资源的问题。

在传统开发模式中，这个机制通常是由设备树来完成的：普遍的做法是，在开发之前先根据项目需求，
提前确定系统中所有用到的硬件设备，然后在设备树中把所有的外围设备信息以设备树特定的语法描述，
在设备树被编译为dtb文件后，才能最终被linux系统加载使用。

从传统开发过程可以看到，一旦硬件资源发生变化，就要重新修改、编译、下载设备树。比较极端的情况是:
当项目中要支持不同的硬件模块，由于模块间往往会共用某些GPIO引脚，
因此系统一旦要考虑兼容随意组合的硬件模块，那么随着模块数量增加，需要编译的设备树数量将爆炸增长。

由此可见，使用传统设备树，是不利于项目的维护和扩展的。内核为了解决这个提出了一套新的解决方案，
那就是Device Tree Overlays，中文上可理解为"设备树插件"。
它的核心原理是，通过扩展传统的设备树语法，使得各个硬件模块的信息可以独立地用新的设备树语法来描述，
这样一来，传统的主设备树中只需要保留最基础的硬件信息(主要是cpu和内存)，其他模块单独编译成"设备树插件"。
在系统实际使用时，根据不同的应用情景，需要用到哪些硬件模块就把对应的设备树插件加入到主设备树即可。

我们已经把常见的硬件模块全部编译为"设备树插件"，通过fire-config工具可以轻松地实现硬件模块的增加和删除。

fire-config功能项
~~~~~~~~~~~~~~

LED
^^^^

使能或者禁止LED灯

KEY
^^^^

使能或者禁止独立按键

MPU6050
^^^^^^^^

使能或者禁止MPU6050陀螺仪

18b20
^^^^^^^^

使能或者禁止18b20温度传感器

HDMI
^^^^^^^^

使能或者禁止HDMI显示器

CAMERA
^^^^^^^^

使能或者禁止摄像头模块

SOUND
^^^^^^^^

使能或者禁止声卡模块

LCD5
^^^^^^^^

使能或者禁止5寸触摸屏

LCD4.3
^^^^^^^^

使能或者禁止4.3寸触摸屏

485r1
^^^^^^^^

使能或者禁止第一路485串口

485r2
^^^^^^^^

使能或者禁止第二路485串口

ADC1
^^^^^^^^

使能或者禁止第一路ADC采样

CAN1
^^^^^^^^

使能或者禁止第一路CAN通信

CAN2
^^^^^^^^

使能或者禁止第二路CAN通信

dht11
^^^^^^^^

使能或者禁止dht11温湿度传感器

ecspi3
^^^^^^^^

使能或者禁止spi通信

uart3
^^^^^^^^

使能或者禁止第三路串口通信

Expand Filesystem
^^^^^^^^^^^^^^^^^^

扩展SD卡容量，解决SD卡镜像烧录完毕后，出现储存容量大幅减小的问题

flasher
^^^^^^^^^^^^^^^^^^

使能或者禁止SD卡刷机，用于SD卡的系统固件烧录到eMMC或者nandflash


